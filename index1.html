<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>The Onyx Present</title>
    <meta name="description" content="The Golden Present (in Black, for Davide)">
    <meta name="keywords" content="design, rocks">
    <meta name="author" content="Nathan Paterson">
    <link rel="stylesheet" href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,300;1,300&family=Work+Sans:wght@700&display=swap" rel="stylesheet">
    <style>
      body { font-family: 'Crimson Pro', serif; }
      h1, #reading-date { font-family: 'Work Sans', sans-serif; }
    </style>
    <script src="readings.js"></script>
  </head>
  <body class="bg-light-silver">
    <main class="w-100 pv5 ph3 pl5-ns f3 lh-copy mw7 black" id="daily-reading">
      <p class="f5 ttu tracked" id="reading-date">X Reading</p>
      <h1 class="f1" id="reading-title">Reading Title</h1>
      <p class="pb5" id="reading-body">Reading body.</p>
      <p class="pt3 bt b--black black" id="footer">The Golden Present (in black) <i>by <a class="link dim black no-underline" href="https://swamisatchidananda.org/" target="_blank">Sri Swami Satchidananda</a></i>.</p>
    </main>
    <script>
      // Get date and month
      var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
      var today = new Date();
      var month = today.getMonth();
      var namedMonth = months[month];
      var date = today.getDate();

      // Look up today's reading
      var reading = entry.find(el => el['gsx$readingdate'] === `${date} ${namedMonth}`);
      var title = entry['gsx$readingtitle'];
      var body = entry['gsx$readingbody'];

      // Replace HTML elements
      document.getElementById("reading-date").innerHTML = date + ' ' + namedMonth;
      document.getElementById("reading-title").innerHTML = title;
      document.getElementById("reading-body").innerHTML = body;


      // // Write today's date
      // var today = new Date();
      //   var options = { month: 'long', day: 'numeric' };
      //   document.getElementById("readingdate").innerHTML = today.toLocaleDateString(undefined, options);
      //
      // // Fetch readings data
      // fetch('readings.json')
      // .then(function (response) {
      //   return response.json();
      // })
      // .then(function (data) {
      //   dailyReading(data);
      // })
      // .catch(function (err) {
      //   console.log('error: ' + err);
      // });
      //
      // // Write today's reading
      // function dailyReading(data) {
      //   var mainContainer = document.getElementById("daily-reading");
      //   for (var i = 0; i < data.feed.entry.length; i++) {
      //     document.getElementById("reading-title").innerHTML = data.feed.entry[i]['gsx$readingtitle']['$t'];
      //     document.getElementById("reading-body").innerHTML = data.feed.entry[i]['gsx$readingbody']['$t'];
      //   }
      // }



      // var getReading = `[{"gsx$readingdate":{"$t"},"gsx$readingtitle":{"$t"},{"gsx$readingbody":"$t"}]`;
      // // Parse the given JSON string
      // var json_reading = JSON.parse(getReading);
      //
      // function getReadingForCurrentDate() {
      //   var currentDate = getCurrentDate(); // For which data is to be fetched and converted into JSON date format yyyy-mm-dd
      //   // Find the particular object that contains the current date
      //   var searchedObj = json_reading[0]['content'].find(f => f['gsx$readingdate'] == currentDate);
      //   if(searchedObj!==undefined)
      //     console.log('count is', searchedObj['content']);
      // }
      //
      // function getCurrentDate() {
      //   var nowDate = new Date();
      //   var month = (nowDate.getMonth() + 1).toString().length == 1 ? '0' + (nowDate.getMonth() + 1) : (nowDate.getMonth() + 1);
      //   var day = nowDate.getDate().toString().length == 1 ? '0' + nowDate.getDate() : +nowDate.getDate();
      //   return nowDate.getFullYear() + '-' + month + '-' + day;
      // }
      //
      // getReadingForCurrentDate();



    </script>
  </body>
</html>
